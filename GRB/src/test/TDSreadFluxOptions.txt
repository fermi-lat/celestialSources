//##############################################################
//
// basic Job options file for a Gleam execution
// $Header$

// primary DLLs, including auditor 

ApplicationMgr.DLLs+= { "GaudiAlg", "GaudiAud"};
ApplicationMgr.ExtSvc += {"ChronoStatSvc"};
AuditorSvc.Auditors = {"ChronoAuditor"};

// ----------------------------
// setup basic event loop stuff
//
ApplicationMgr.ExtSvc = { 
    "GlastEventSelector/EventSelector" 
    , "EventCnvSvc"
    };

EventPersistencySvc.CnvServices = {"EventCnvSvc"};
EventSelector.Input = "NONE";


// ----------------------------
//  a structure for the topalg, using sequencer steps

ApplicationMgr.TopAlg = {
      "Sequencer/Top" };

//the top sequence loop
Top.Members={
    "Sequencer/Generator"
    ,"Sequencer/Digitization"
};

// ----------------------------
//  Geometry definition
//
ApplicationMgr.DLLs += {"GlastSvc"};
ApplicationMgr.ExtSvc += { "GlastDetSvc"};
// select one of the following 
GlastDetSvc.topVolume="LAT"; 
//GlastDetSvc.topVolume="CsIElement";  // to look at a single full crystal
//GlastDetSvc.topVolume="CALLayer";
//GlastDetSvc.topVolume="CALLayers";
//GlastDetSvc.topVolume="oneTower";
//GlastDetSvc.topVolume="trayReg";
//GlastDetSvc.topVolume="trayBot";


GlastDetSvc.xmlfile="$(XMLGEODBSROOT)/xml/flight/flightSegVols.xml";
GlastDetSvc.visitorMode="recon";

// ----------------------------
//  Randoms definition
//
ApplicationMgr.ExtSvc += { "GlastRandomSvc"};

// ----------------------------
//  Generation or input

ApplicationMgr.DLLs +={ "G4Generator","G4Propagator"};
ApplicationMgr.ExtSvc += {"G4GeometrySvc"};
Generator.Members = {"FluxAlg"};
#include "$FLUXSVCROOT/src/defaultOptions.txt"

Generator.Members += {"G4Generator"};
G4Generator.defaultCutValue=0.7; // instead of 0.1 default

ApplicationMgr.DLLs +={ "GRB"};
ApplicationMgr.TopAlg +=  {"TDSReadFluxAlg"};

// Append (or replace) the list of source library documents
FluxSvc.source_lib += {"$(G4GENERATORROOT)/src/test/test_sources.xml"};
FluxSvc.source_lib += {"$(GRBROOT)/xml/GRB_user_library.xml"};

// -----> To set the source <-----
// From here we can select the model for GRB ... 

//FluxAlg.source_name="GRBROOT_Gal"; 

//FluxAlg.source_name="GRBspectrum_Gal";  
//FluxAlg.source_name="GRBspectrum_Test"; // with fixed direcion

//FluxAlg.source_name="GRBobsspectrum_Gal";
//FluxAlg.source_name="GRBobsspectrum_Test"; // with fixed direcion

//FluxAlg.source_name="GRBmanager_Gal";

// ----------------------------
//  Digitization
//
ApplicationMgr.DLLs +={ "TkrDigi", "CalDigi", "AcdDigi"  };
Digitization.Members = { 
    "TkrSimpleDigiAlg", 
    "CalDigiAlg", 
    "AcdDigiAlg"};

//ApplicationMgr.ExtSvc += { "GlastPropagatorSvc" };

ApplicationMgr.DLLs +={ 
    "CalibSvc",
    "CalRecon", "CalUtil", "TkrUtil",
    "TkrRecon"
    };

//          tracker
// -------------------------------------------
ApplicationMgr.ExtSvc   += { "TkrGeometrySvc"};
ApplicationMgr.ExtSvc   += { "TkrInitSvc"};

// ---------------------- Save options: -----------------------
//TDSReadFluxAlg.savefile={"ascii"};
TDSReadFluxAlg.savefile+={"root"};
// ------------------------------------------------------------
// Set output level threshold (2=DEBUG, 3=INFO, 4=WARNING, 5=ERROR, 6=FATAL )
ToolSvc.OutputLevel=3;    // too verbose in debug
MessageSvc.OutputLevel=3;

// Max Number of events
ApplicationMgr.EvtMax = 100;

//==============================================================
//
// End of job options file
//
//##############################################################
