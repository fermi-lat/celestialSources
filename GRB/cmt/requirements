package GRB


use FluxSvc
use ROOT


apply_pattern packageShr
apply_pattern package_include


pattern ld_library_path \
path_append LD_LIBRARY_PATH ${GRBROOT}/${CMTCONFIG}
path_append LD_LIBRARY_PATH ${FLUXSVCROOT}/${CMTCONFIG}
apply_pattern ld_library_path



#=============================================================


private


# get flags to build shared library
apply_pattern package_Cshlibflags
apply_pattern package_headers


# to test grbObsTester...
#library GRB GRB/*.cxx   \
# GRBmaker/*.cxx \
# ${GRB_headers}

# to test GRBTestAlg...
library GRB GRB/*.cxx test/GRBTestAlg.cxx Dll/*.cxx   \
 GRBmaker/*.cxx \
 ${GRB_headers}



macro_append GRB_headers "" WIN32 "../xml/*.xml test/*.xml"


macro GRB_lib " -L ${GRBROOT}/${CMTCONFIG} -lGRB "\
 	WIN32 "${GRBROOT}/${BINDIR}/GRB.lib "

#non-share test program for development


application test_GRBROOT  test/other/GRBROOTtest.cxx

#macro_append GRBTestlinkopts  "${GRB_lib}"\
#      WIN32 " ${GRB_lib} "

macro_append test_GRBROOTlinkopts  "${GRB_lib} -L${FLUXSVCROOT}/${CMTCONFIG} -lFluxSvc "\
      WIN32 " ${GRB_lib} -L${FLUXSVCROOT}/${BINDIR}/FluxSvc.lib "



application grbObsTester   test/other/GRBobsTester.cxx



macro_append grbObsTesterlinkopts  "${GRB_lib} -L${FLUXSVCROOT}/${CMTCONFIG} -lFluxSvc "\
      WIN32 " ${GRB_lib} -L${FLUXSVCROOT}/${BINDIR}/FluxSvc.lib "



# test program, using local joboptions
public set JOBOPTIONS ${GRBROOT}/src/test/jobOptions.txt
apply_pattern package_test




macro_append ROOT_libs  " -lHist  -lMatrix -lGraf -lGraf3d -lGpad" \
               WIN32    " $(ROOT_PATH)/lib/libHist.lib \
                         $(ROOT_PATH)/lib/libGpad.lib \
                        $(ROOT_PATH)/lib/libGraf.lib $(ROOT_PATH)/lib/libGraf3d.lib"

#macro GRBROOT_libs  " -lHist  -lMatrix -lGraf -lGraf3d -lGpad " \
#	WIN32 " ${ROOT_PATH}/lib/libHist.lib ${ROOT_PATH}/lib/libMatrix.lib \
#		${ROOT_PATH}/lib/libGraf.lib ${ROOT_PATH}/lib/libGraf3d.lib \
#		${ROOT_PATH}/lib/libGpad.lib"

