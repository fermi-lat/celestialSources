package GRB
version v2r1p1
author Johann Cohen-Tanugi <johann.cohen@pi.infn.it> Nicola Omodei<nicola.omodei@pi.infn.it> Sandhia Bansal <sandhiab@lheapop.gsfc.nasa.gov>

# $Id$


use FluxSvc    *
use flux       *
use ROOT       *  IExternal
use GlastSvc   *  

apply_pattern packageShr

# This needs to be fixed (?)
#=============================================================
path_append LD_LIBRARY_PATH ${GRBROOT}/${BINDIR}
path_append LD_LIBRARY_PATH ${FLUXSVCROOT}/${BINDIR}
#=============================================================

private

use RootIo     * -no_auto_imports

apply_pattern package_Cshlibflags
apply_pattern package_headers

apply_pattern package_stamps
macro_append GRB_stamps " $(GRBDir)/GRB_lib.stamp"


# component library, with GRB, GRBmaker, GRBUtil, and LatGRBAlert
macro_append GRB_headers 	""  \
			  WIN32 "../xml/*.xml test/*.xml GRBmaker/*.h LatGRBAlert/*.h GRB/*.h"

macro source "*.cxx" WIN32 "*.cxx *.h"

library GRB_lib -no_share 	$(source) \
     -s=GRB $(source)\
     -s=GRBmaker $(source)\
     -s=LatGRBAlert $(source)

macro libs ""   WIN32 " $(GRBDir)/GRB_lib.lib "

macro GRB_linkopts "-L $(GRBDir) -lGRB_lib" \
                       WIN32 ""

macro_append ROOT_linkopts " -lHist  -lMatrix -lGraf -lGraf3d -lGpad "\ 
      WIN32  ' libHist.lib libMatrix.lib  libGraf.lib libGraf3d.lib libGpad.lib'

library GRB  Dll/*.cxx $(libs)

macro GRB_extrastamps "$(GRBDir)/GRB_lib.stamp"

#
#	Executables:
#

# this executable provides visualization with ROOT at runtime
#
application test_GRBROOT  test/other/GRBROOTtest.cxx $(libs)
public set JOBOPTIONS ${GRBROOT}/src/test/jobOptions.txt


# builds batch job (no ROOT visualization) for nightly builds, 
# and sets its jobOptions file
#
apply_pattern package_test
set TESTJOBOPTIONS ${GRBROOT}/src/test/test_jobOptions.txt

