package GRB

use FluxSvc
use ROOT
use RootIo
use GlastSvc

apply_pattern packageShr
#apply_pattern ld_library_path

#apply_pattern package_linkopts
# This needs to be fixed (?)
#=============================================================
path_append LD_LIBRARY_PATH ${GRBROOT}/${BINDIR}
path_append LD_LIBRARY_PATH ${FLUXSVCROOT}/${BINDIR}
#=============================================================
private

#apply_pattern package_include
apply_pattern package_Cshlibflags
apply_pattern package_headers

apply_pattern package_stamps
macro_append GRB_stamps " $(GRBDir)/GRB_lib.stamp"

# component library, with GRB, GRBmaker, GRBUtil, and LatGRBAlert

macro_append GRB_headers "" WIN32 "../xml/*.xml test/*.xml GRBmaker/*.h LatGRBAlert/*.h GRB/*.h"

#library GRB *.cxx GRB/*.cxx Dll/*.cxx GRBmaker/*.cxx  LatGRBAlert/*.cxx ${GRB_headers}

library GRB_lib -no_share *.cxx GRB/*.cxx GRBmaker/*.cxx  LatGRBAlert/*.cxx ${GRB_headers}

macro libs ""   WIN32   "$(GRBDir)/GRB_lib.lib"

macro GRB_linkopts "-L $(GRBDir) -lGRB_lib" \
                       WIN32 ""

macro_append ROOT_linkopts " -lHist  -lMatrix -lGraf -lGraf3d -lGpad " \
       WIN32 " $(ROOT_PATH)/lib/libHist.lib $(ROOT_PATH)/lib/libMatrix.lib $(ROOT_PATH)/lib/libGraf.lib $(ROOT_PATH)/lib/libGraf3d.lib $(ROOT_PATH)/lib/libGpad.lib "

library GRB  Dll/*.cxx $(libs)
macro GRB_extrastamps "$(GRBDir)/GRB_lib.stamp"

application test_GRBROOT  test/other/GRBROOTtest.cxx $(libs)

application grbObsTester   test/other/GRBobsTester.cxx $(libs)

macro_append grbObsTesterlinkopts  "${GRB_lib} -L${FLUXSVCROOT}/${CMTCONFIG} -lFluxSvc "\
      WIN32 " ${GRB_lib} -L${FLUXSVCROOT}/${BINDIR}/FluxSvc.lib "

# test program, using local joboptions

public set JOBOPTIONS ${GRBROOT}/src/test/jobOptions.txt

apply_pattern package_test
set TESTJOBOPTIONS ${GRBROOT}/src/test/test_jobOptions.txt
set TESTJOBOPTIONS ${GRBROOT}/src/test/jobOptions.txt
